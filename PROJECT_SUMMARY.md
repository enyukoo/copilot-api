# Copilot API Project Summary

## Overview
This project is a reverse-engineered proxy for the GitHub Copilot API, designed to make Copilot accessible via an OpenAI-compatible interface. It enables integration with tools and workflows that expect an OpenAI API, while providing additional features such as usage tracking, manual approval, and rate limiting.

## Architecture
- **Entry Point:** The CLI is managed via `src/main.ts` using the `citty` command framework. Subcommands include `start`, `auth`, `check-usage`, and `debug`.
- **Server:** The API server is started with the `start` command, exposing endpoints compatible with OpenAI and Anthropic APIs.
- **Authentication:** The `auth` command handles GitHub authentication and token management, storing tokens securely in the user's home directory.
- **Usage Tracking:** The `check-usage` command and `/usage` endpoint provide real-time quota and usage information, with a web dashboard for visualization.
- **Error Handling:** Centralized in `src/lib/error.ts`, with custom error classes and forwarding logic for API responses.
- **Utilities:** Helper functions for caching models, VSCode version, and async utilities are in `src/lib/utils.ts`.
- **Testing:** Tests are located in the `tests/` directory and use Node's built-in test runner or compatible alternatives.

## Key Features
- OpenAI-compatible API endpoints for chat completions, embeddings, and models.
- Manual approval and rate limiting for requests.
- Web dashboard for monitoring usage.
- CLI commands for authentication, usage checking, and debugging.
- Docker and npx support for easy deployment and usage.

## Error-Prone Areas & Improvements
- **Linting:** The project enforces strict linting and formatting. Some test files use `any` and may require further type safety improvements.
- **Async Handling:** All async operations are wrapped with error handling, but test files should ensure all promises are properly awaited.
- **Token Management:** Secure storage and handling of GitHub tokens is critical; improvements could include better error messages and recovery flows.
- **API Compatibility:** As GitHub Copilot API is reverse-engineered, upstream changes may break compatibility. Regular updates and monitoring are recommended.

## Documentation & Remarks
- Inline comments have been added to main entry points and utility files for clarity.
- See `README.md` for detailed usage, options, and warnings about responsible use.
- Code style guidelines are documented in `AGENTS.md`.

---

*Generated by GitHub Copilot on September 22, 2025.*
